

## What is TokenPlex

TokenPlex is an express/node based framework to aggregate crypto-currency data from the web, normalize and cleanse it, 
and provide simple easy to digest endpoints.

It can be used as a middleware server for an application/service involving digital currencies.

## Using the hosted Implementation

<img src="https://lh3.googleusercontent.com/-aPG5PHijX3zyKDDBHICq4WIsidnV35WnVEIZxrwTUiUfiA77t-LSi7l7bjJbwFRr6-wv-cvpjeWO5kYsatPQdob5_NnNhEyIfR5kj2nGCsOSTyb-RlULb_07v1XFjIoEVb-E1hL7qFVC2Z8GKNYpvAB-T-sGfUEpMNq0WWikZ7JrqcVx8H7NL7aK1XNUITSD4c7rzQQsWX6sKRlymQo9GA-od7x88cZlwIHmcc2ZAM-aHuX3ZCRNm5_XkcRWVR0hD3369BiJaXHzGYQnqcevkbt4hWt6J6s-vC-3oBPpma91kKcyKuzLoXBD50n_onZOQAXt5vHQIm1bFkdqRsiP7-aaeUF50Ogs8vtwQJ-brQuZeQbsr8NNNmHf8iBTp5G2SoBIg1ipyBykEjusexzYgHD46nzOoBieePANqBpG1kxUdy_PuZo0y4MJ8WjzNRuJSDu3z_aeFE52R_FL_bb_luuVmsbrKxSerUBkjmC3eQvBgPAeNuMdi2lJO29MDI5zaLPC4yLi6A71tBB3YTxlpLMLzg596xsxF0jBwdsp34rAqCxDbLENxmGOCy4RY-hRj1LbBSCInheijt9ox1M3hNEKr97F7aIz5CExwdZvQ=w960-h720-no"/>

<img src="https://lh3.googleusercontent.com/oKA_w34REwyff4DVc40JkhPXCZfBmIeAsVg_saLkX8aCluiw-wrEr7rr9ZBmOFKtkbQ9iDpt5mB1B-AXLxek87oFuQFUeQsJYSuo_T98nIBL4xEQ9fzOKPc1GDHhUtbxPdJaitOZufPirJKtgK1G1KXuBJ48zKr6bfpJusLFSDSpsapryzw1GUE8iF5bu06ttz6zQy5oTRVA--T4ABb60bThfUwFWr2NZIECw_NNbYvS-I-op73LakigPsLxCQ4axIo5oiHTdiKba2J3XSDy91lnmNkA965EiXlAEwF3Bj117ws1d0gvRHbY8wAnIH-VWpat3a7NuPJ5eelshHPpt52DKslVO_vPl5sFoGkCzsSYn2B9LIuvPfDZzFc2clEnJ6HbLZlnFguYyAX1CMMwxqXhbXfYTNiV2_m7Ma-on0vyRBJDJssayR_QyMVNW11M9aJWyCFVYFomQIaj0zivXlFgRkv3UQSa_XEFsjIMda7B-DKRDe8OCfQ8TP4c7JhCWFNzpmNZM_TV75V2H84ilzzHdXVy_IbD4F57iYZOSMDWIATJOoeHiGir2sq4mYgZHhYx5_YcPkRlk_aYdWboO5PRjUK_TIzjM74EPN521Q=w960-h720-no"/>

<img src="https://lh3.googleusercontent.com/2w6FP7e6kDh9Bqtpdw9DjJQsrp9b8UmXLOBI5agHWv9agw1mHl55hqeW-BToUl3xfS5klABRpQbA7K0g2E9UC7lfoEfv46nq5BNr7BQ5C0sGOpPVGd5p3dU7OhPr03DhnOTMOPN1hy6SPDrxAg2BQH5aReZU0BomWBTOJF1P7YuizXyx5Noj9xgori5S-QcrixDgNvXoD3CNGooXZcIgt2FSm97iyc6QJnFaRNAOda5z6E4Yh1hTG87LDByE-_QYFTfsNjgebi4JXcj9hqzfgAooavLtpSvOhHN6lA8AFsf9pyF3coR_wYyv7BS06MIWeEKSz1COQPlaqzzd9LrTwS07AoHdmIsdB41bdpMIGZinGC2uNktr4byIRxmpyBSPgBFilpYnWr1caTh73bybpbJVWjyVuSo7FumxrldRkQuWZGDWJodn8JqG6SjjPd67258cuuTdcxw_ye4_fB5fTot2W9jMW_nBrLw0Iz-lpTqRCd0WUWDZo3KCc86H9n9uvfgYlLeBK8smbDp9H-HOyWzPzmQoz5Bssj97Kp9-pqPHKiE36CaR_IurY4VIhONO7sNeH1Jh3uQcXfm0eCtmZLaplFXN5KslDrtbh2f6dg=w960-h720-no"/>

<img src="https://lh3.googleusercontent.com/KBgNGd5lA7fN3Bd6JUi_prF-RHNaIFx5k4_-oiPJGnS_1n_SeWndbbN1NOv0-snGxRricAXyw2ZFonnOi4OPu6cokAG0rJ9TSjO4qkwfK1rR7Fgz_pV4ca0Z5aBBXKZ77zDeSGVl74HWi_h76lFNlblkSUD5_if0S68HNYTkhXcmnl7_F5YIt26-FYwoAJ3ES4QfJtOwpwao1OR_7vwkSiDyuZe9ydlF__Jx489jV_J-TyeQrczMjau9X4gwBceXd4zPArrHEoPAs4tTfTpTmo2Nh5WGbLAT0bRqD-Bd7gvtp-Sjmkqztsg9MfG8N2vv2ciVCSc1qI-Ui7m_BWiowzm5gH6NNdVmQE1b4ltosj8YWb38l0hKRvTKgTq3qX44_G7ayH0Bmp7-pgbTa0ByuVETWw3rgw7Rp9uC68XECjAZTwYKtFMF1n9y88eQWvuv5nl8PHbviwJjPNL3W-SXXB9BMb9i6X9cI1juQ7VMcmsvVIk12cJawg3n5DhgvJRbUV2OJoF0nDC168GsSAFc6KlZ86DM49OHRUMyYvFNwtUMqLXAkfxNQVGYd6sEBRxG2BsunjenEZ-HmDpuvIiOXcJ-bgnsD2n1-kPbQk2hiA=w960-h720-no"/>

Web Front-End is hosted at https://tokenplex.io/

API Endpoint is hosted at https://api.tokenplex.io

API Docs at https://api.tokenplex.io/docs

## Running a local middleware server 

#### Prerequisites
You need to have a running [CQL](http://cassandra.apache.org/doc/latest/cql/) installation for time-series data
and a [Redis](https://redis.io/) server for Ticker data.

You can use any CQL API compliant database and Redis API compatible cache for storage.

TokenPlex uses [YugaByte](https://www.yugabyte.com) which is a unified CQL + Redis implementation.

For instructions on how to build YugaByte from source, see [here](https://github.com/YugaByte/yugabyte-db)

To download and install binaries for your platform, see [here](https://docs.yugabyte.com/quick-start/install/) 

If you are using a remote redis or CQL host, then update constants.js with the same.

#### Installation

```
npm install
npm start
```

By default the [Express](https://expressjs.com/) service will start at http://localhost:9000/

To Create all tables 

```
GET /create/create-all-tables
``` 

Individual create table documentation can be found in 

```
routes/schema/index.js

```
To start cron job for querying coin ticker data

```
GET /cron/query-coin-list-table 
```

##### Optional
For server side rendering of Graph data, you need to install chartjs-node.
It requires canvas.js to be pre-installed in the system and 
also has a dependancy on chart.js.
Installation instructions for Cairo and Canvas for your plaform can be found
 [here](https://github.com/Automattic/node-canvas#installation)
 Create /public/image/charts directory in your project where charts will be stored.

```
npm install chart.js@2.6.0
npm install chartjs-node
```
and then simply call this endpoint to start cron job for querying 24 hour data
and server side graph rendering.

```
GET /cron/query-daily-history-table
```

You are now running an API load balancer for serving crypto-currency data.


## How It Works

Ticker data is stored in a Redis Cache and is by default updated every 60 seconds.

TimeSeries metrics data and token details is stored in a CQL database and is updated
on last request with a TTL strategy of 120 seconds.

Additionally you can specify an S3 Image server location for server side rendering of graph images.

You can run your own load balancer and application server on top of this architecture.

## Data Sources

Current API Aggregator is powered by

1. https://www.cryptocompare.com/api/ 

2. https://coinmarketcap.com/api/

Plan to support top 10 exchanges by volume is on the road-map. 
